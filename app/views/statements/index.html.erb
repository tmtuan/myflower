<div class="container-fluid">
    <div class="col-md-9 col-md-offset-1">
    <h1>Know who you are to enhance the best of you</h1>

      <div class="progress" id="tmt" >
        <div class="progress-bar progress-bar-success progress-bar-striped" role="progressbar" id="completion" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width: 0%" complete="0">
          <span class="sr-only">40% Complete (success)</span>
        </div>
      </div>

    <%= form_for :statements, url: score_path,  html: { class: "form-group"} do |f| %>

            <table class="table table-hover">
            <th>Statements</th>
            <th colspan="6">Scale</th>

            <% @n = 0 %>
            <% @statements.each do |s| %>
                <tr>
                  <td><%= s.content %></td>
                  <td>
                    <label class="radio radio-blue">
                      <input type="radio" name="statements[<%= @n %>]" data-toggle="radio" id="inlineRadio1" value="<%= s.direction ? 1 : -1 %>" onchange='input_onchange("<%= @n %>")' > Behavior Statements
                    </label>
                  </td>
                  <td>
                    <label class="radio radio-azure">
                      <input type="radio" name="statements[<%= @n %>]" data-toggle="radio" id="inlineRadio2" value="<%= s.direction ? 2 : -2 %>" onchange='input_onchange("<%= @n %>")'> Very Inaccurate
                    </label>

                  </td>
                  <td>
                    <label class="radio radio-green">
                      <input type="radio" name="statements[<%= @n %>]" data-toggle="radio" id="inlineRadio3" value="<%= s.direction ? 3 : -3 %>" onchange='input_onchange("<%= @n %>")'> Neither Accurate Nor Inaccurate
                    </label>
                  </td>
                  <td>
                    <label class="radio radio-orange">
                      <input type="radio" name="statements[<%= @n %>]" data-toggle="radio" id="inlineRadio3" value="<%= s.direction ? 4 : -4 %>" onchange='input_onchange("<%= @n %>")'> Moderately Accurate
                    </label>
                  </td>
                  <td>
                    <label class="radio radio-red">
                      <input type="radio" name="statements[<%= @n %>]" data-toggle="radio" id="inlineRadio3" value="<%= s.direction ? 5 : -5 %>" onchange='input_onchange("<%= @n %>")'> Very Accurate
                    </label>
                  </td>
                  <td>
                    <span class="glyphicon glyphicon-ok invisible" id="checked<%= @n %>" done="no"></span>
                  </td>
                </tr>
                <% @n = @n + 1 %>
            <% end %>
            </table>
        </div>

        <%= f.submit "Send", :class => "btn btn-lg btn-block btn-primary" %>
    <% end %>
    </div>
</div>

<script src="assets/js/ct-paper-radio.js"></script>

<script>
  $(document).ready(function() {
      $('#tmt').on('click', function(){
         $('.progress-bar').css('width', "80%");
      });
  });

  function input_onchange(n) {
      var element = "checked"+n;
      //('#checked').css.removeClass('invisible');

      document.getElementById(element).classList.remove('invisible');
      if(document.getElementById(element).getAttribute('done') == 'no') {
          document.getElementById(element).setAttribute('done', 'yes');
          var complete = parseInt(document.getElementById('completion').getAttribute('complete'));
          complete++;
          $('.progress-bar').css('width', complete*2+"%");
          document.getElementById('completion').setAttribute('complete', complete.toString());
      }

  }


</script>
